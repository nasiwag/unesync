import{D}from"./Dialog.3441429d.js";import{C as A}from"./CheckBox.4a0d7770.js";import{T as M}from"./TextInput.a2d825bb.js";import{F}from"./FileInput.95af2853.js";import{A as B}from"./AdminLayout.ba431b54.js";import{A as R}from"./AutoComplete.241817c7.js";import{L}from"./LoadingButton.d5296c11.js";import{T as N}from"./InputError.7cfbcfa2.js";import{T as E}from"./DialogModal.25f05db4.js";import{T as I}from"./TrashedMessage.3910bf19.js";import{T as j}from"./FormSection.82ec9a11.js";import{T as z}from"./DangerButton.3c4e2a43.js";import{T as O}from"./SectionTitle.850f7dea.js";import{T as W}from"./ActionMessage.84226e08.js";import{T as q}from"./SecondaryButton.017b11cf.js";import{_ as G,r as a,o as n,d as h,w as u,b as s,a as m,c,g as f,t as d,f as b,F as y,h as H,n as J}from"./app.7f0e9691.js";import"./index.1f699fe1.js";import"./Checkbox.0d543eb0.js";import"./Label.048d0136.js";import"./Input.33dca280.js";import"./Modal.e5b9be64.js";import"./DropdownLink.e265102c.js";import"./ApplicationLogo.135e3d4e.js";import"./ApplicationMark.f5051ed3.js";import"./throttle.d54d892c.js";const K={props:["edit","roles","warehouses"],components:{Dialog:D,CheckBox:A,FileInput:F,TextInput:M,AdminLayout:B,AutoComplete:R,LoadingButton:L,TecInputError:N,TecDialogModal:E,TecFormSection:j,TecDangerButton:z,TrashedMessage:I,TecSectionTitle:O,TecActionMessage:W,TecSecondaryButton:q},data(){return{confirm:!1,disabling:!1,permanent:!1,restoreConf:!1,form:this.$inertia.form({_method:this.edit?"put":"post",photo:null,password:null,password_confirmation:null,name:this.edit?this.edit.name:null,roles:this.edit?this.edit.roles:[],email:this.edit?this.edit.email:null,username:this.edit?this.edit.username:null,view_all:this.edit?this.edit.view_all==1:!1,edit_all:this.edit?this.edit.edit_all==1:!1,warehouse_id:this.edit?this.edit.warehouse_id:null})}},methods:{update(){this.form.post(this.edit?this.route("users.update",this.edit.id):this.route("users.store"),{preserveScroll:!0,onSuccess:()=>this.form.reset("password","password_confirmation","photo")})},destroy(){this.confirm=!0},restore(){this.restoreConf=!0},deletePermanently(){this.permanent=!0},restoreUser(){this.$inertia.put(this.route("users.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},deleteUser(){this.form.delete(route("users.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},deleteUserPermanently(){this.form.delete(route("users.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closeRestoreModal(){this.restoreConf=!1},closePermanentModal(){this.permanent=!1},closeModal(){this.confirm=!1},disableTwoFactorAuthentication(){this.disabling=!0,this.$inertia.delete(route("users.disable.2fa",this.edit.id),{preserveScroll:!0,onSuccess:()=>this.disabling=!1})}}},Q={class:"flex items-center"},X=m("span",{class:"text-blue-600 font-medium mx-2"},"/",-1),Y=["src"],Z={class:"flex flex-col gap-6"},$={class:"flex flex-col lg:flex-row gap-6"},ee={class:"flex flex-col gap-6 w-full lg:w-1/2"},oe={class:"flex flex-col gap-6 w-full lg:w-1/2"},te={key:1,class:"flex flex-wrap items-center gap-x-6 gap-y-3"},re={class:"block w-full font-medium text-gray-700"},se={class:"font-bold"},le={class:"flex flex-col gap-6"},ne={class:"flex flex-col lg:flex-row gap-6"},ie={class:"w-full flex items-center justify-between"},ae={key:0},de={key:1},me={class:"flex items-center"};function ue(e,r,l,ce,o,i){const _=a("Link"),k=a("trashed-message"),p=a("text-input"),v=a("auto-complete"),g=a("check-box"),U=a("tec-input-error"),V=a("tec-danger-button"),T=a("tec-action-message"),C=a("loading-button"),S=a("tec-form-section"),w=a("Dialog"),P=a("admin-layout");return n(),h(P,{title:e.$t(l.edit?"edit_x":"create_x",{x:e.$t("User")})},{default:u(()=>[s(S,{onSubmitted:i.update},{title:u(()=>[m("div",Q,[l.edit?(n(),c(y,{key:0},[s(_,{class:"text-blue-600 hover:text-blue-700",href:e.route("users.index")},{default:u(()=>[f(d(e.$t("Users")),1)]),_:1},8,["href"]),X,l.edit.photo?(n(),c("img",{key:0,class:"block w-6 h-6 rounded-full mr-2",src:l.edit.photo},null,8,Y)):b("",!0),f(" "+d(l.edit.name),1)],64)):(n(),c(y,{key:1},[f(d(e.$t("create_x",{x:e.$t("User")})),1)],64))])]),description:u(()=>[f(d(l.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:u(()=>[l.edit&&l.edit.deleted_at?(n(),h(k,{key:0,class:"mb-6",onRestore:i.restore},{default:u(()=>[f(d(e.$t("This user has been deleted.")),1)]),_:1},8,["onRestore"])):b("",!0),m("div",Z,[m("div",$,[m("div",ee,[s(p,{modelValue:o.form.name,"onUpdate:modelValue":r[0]||(r[0]=t=>o.form.name=t),error:e.$page.props.errors.name,label:e.$t("Name")},null,8,["modelValue","error","label"]),s(p,{modelValue:o.form.username,"onUpdate:modelValue":r[1]||(r[1]=t=>o.form.username=t),error:e.$page.props.errors.username,label:e.$t("Username")},null,8,["modelValue","error","label"]),s(p,{type:"email",modelValue:o.form.email,"onUpdate:modelValue":r[2]||(r[2]=t=>o.form.email=t),error:e.$page.props.errors.email,label:e.$t("Email")},null,8,["modelValue","error","label"]),s(p,{modelValue:o.form.phone,"onUpdate:modelValue":r[3]||(r[3]=t=>o.form.phone=t),error:e.$page.props.errors.phone,label:e.$t("Phone")},null,8,["modelValue","error","label"])]),m("div",oe,[s(p,{id:"password",type:"password",label:e.$t("Password"),modelValue:o.form.password,"onUpdate:modelValue":r[4]||(r[4]=t=>o.form.password=t),error:e.$page.props.errors.password},null,8,["label","modelValue","error"]),s(p,{type:"password",id:"password_confirmation",label:e.$t("Confirm Password"),modelValue:o.form.password_confirmation,"onUpdate:modelValue":r[5]||(r[5]=t=>o.form.password_confirmation=t),error:e.$page.props.errors.password_confirmation},null,8,["label","modelValue","error"]),s(v,{id:"warehouse",label:e.$t("Warehouse"),suggestions:l.warehouses,modelValue:o.form.warehouse_id,"onUpdate:modelValue":r[6]||(r[6]=t=>o.form.warehouse_id=t),error:e.$page.props.errors.warehouse_id},null,8,["label","suggestions","modelValue","error"])])])]),l.roles&&l.roles.length?(n(),c("div",te,[m("label",re,d(e.$t("Roles")),1),(n(!0),c(y,null,H(l.roles,t=>(n(),h(g,{key:t.name,id:t.name,value:t.name,label:e.$t(t.name),checked:o.form.roles,"onUpdate:checked":r[7]||(r[7]=x=>o.form.roles=x),error:e.$page.props.errors.roles},null,8,["id","value","label","checked","error"]))),128)),e.$page.props.errors.roles?(n(),h(U,{key:0,message:e.$page.props.errors.roles,class:"w-full mt-1"},null,8,["message"])):b("",!0)])):b("",!0),m("h1",se,d(e.$t("Permissions")),1),m("div",le,[m("div",ne,[s(g,{id:"view_all",checked:o.form.view_all,"onUpdate:checked":r[8]||(r[8]=t=>o.form.view_all=t),label:e.$t("Can view all record")},null,8,["checked","label"]),s(g,{id:"edit_all",checked:o.form.edit_all,"onUpdate:checked":r[9]||(r[9]=t=>o.form.edit_all=t),label:e.$t("Can edit all record")},null,8,["checked","label"])])])]),actions:u(()=>[m("div",ie,[l.edit?(n(),c("span",ae,[l.edit.deleted_at?(n(),c("button",{key:1,type:"button",onClick:r[11]||(r[11]=(...t)=>i.deletePermanently&&i.deletePermanently(...t)),class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},d(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(n(),c("button",{key:0,type:"button",onClick:r[10]||(r[10]=(...t)=>i.destroy&&i.destroy(...t)),class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},d(e.$t("delete_x",{x:e.$t("User")})),1)),l.edit.two_factor_enabled?(n(),h(V,{key:2,class:J(["ml-2",{"opacity-25":o.disabling}]),disabled:o.disabling,onClick:i.disableTwoFactorAuthentication},{default:u(()=>[f(d(e.$t("Disable 2FA")),1)]),_:1},8,["disabled","class","onClick"])):b("",!0)])):(n(),c("div",de)),m("div",me,[s(T,{on:o.form.recentlySuccessful,class:"mx-3"},{default:u(()=>[f(d(e.$t("Saved.")),1)]),_:1},8,["on"]),s(C,{type:"submit",loading:o.form.processing,disabled:o.form.processing},{default:u(()=>[f(d(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),s(w,{"max-width":"md",show:o.permanent,"action-type":"delete",title:"Delete User?",close:i.closePermanentModal,action:i.deleteUserPermanently,"action-text":"Delete Permanently",content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),s(w,{show:o.confirm,close:i.closeModal,action:i.deleteUser,"action-type":"delete",title:"Delete User?","action-text":"Delete User",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),s(w,{show:o.restoreConf,action:i.restoreUser,title:"Restore User!",close:i.closeRestoreModal,"action-text":"Restore User",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}var Ee=G(K,[["render",ue]]);export{Ee as default};
